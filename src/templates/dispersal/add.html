{% extends 'base.html' %}
{% load static %}
{% block extrahead %}

<link href="{% static "css/jquery-ui.css" %}" rel="stylesheet" />
	<script src="{% static "js/jquery_.min.js" %}"></script>
	<script src="{% static "js/jquery-ui.js" %}"></script>
<style>
label{
	font-size: 16px;
}
#existing {
	width: 130px;
	 box-sizing: border-box;
	 border: 2px solid #ccc;
	 border-radius: 4px;
	 font-size: 16px;
	 background-color: white;
	 background-image: url('searchicon.png');
	 background-position: 10px 10px;
	 background-repeat: no-repeat;
	 padding: 12px 20px 12px 40px;
	 -webkit-transition: width 0.4s ease-in-out;
	 transition: width 0.4s ease-in-out;
}
#existing:focus {
    width: 100%;
}

#myUL {
    /* Remove default list styling */
    list-style-type: none;
    padding: 0;
    margin: 0;
}

#myUL li a {
    border: 1px solid #ddd; /* Add a border to all links */
    margin-top: -1px; /* Prevent double borders */
    background-color: #f6f6f6; /* Grey background color */
    padding: 12px; /* Add some padding */
    text-decoration: none; /* Remove default text underline */
    font-size: 18px; /* Increase the font-size */
    color: black; /* Add a black text color */
    display: block; /* Make it into a block element to fill the whole list */
}

#myUL li a:hover:not(.header) {
    background-color: #eee; /* Add a hover effect to all links, except for headers */
}
</style>

{% endblock extrahead %}
{% block bodyclass %}
<body class="dashboard-page">
{% endblock bodyclass %}
{% block content %}

		<div class="main-grid">
			<div class="banner">
				<h2>
					<a href="/">Home</a>
					<i class="fa fa-angle-right"></i>
					<span><a href="/dispersal">Fish Dispersal</a></span>
		      <i class="fa fa-angle-right"></i>
					<span>Add</span>
				</h2>
			</div>
			<div class="clearfix"> </div>
			<div class="agile-grids">
				<!-- validation -->
				<div class="grids">
					<div class="forms-grids">
						<form method="post" action="#" class="valida" autocomplete="off" novalidate="novalidate">
							{% csrf_token %}
						<div class="w3agile-validation col-md-4">
							<div class="panel panel-widget agile-validation">

										<div class="my-div" >
											<div class="input-info">
												<h3>Existing Customer:</h3>
											</div>
										<div class="form-group">
											<input type="text" id="existing" name="existing" onkeyup="myFunction()" class="form-control" placeholder="Search for names..">
										</div>

										<hr>
										<ul id="myUL">
											{% for customer in customers %}
											<li style="display:none;"><a class="customer"href="#">{{customer}}</a></li>
											{% endfor %}

										</ul>

								</div>
								<div class="my-div new">

										<div class="input-info">
											<h3>New Customer</h3>
										</div>


										<div class="form-group valid-form">
											<label for="field-0-1" style="color:black; font-size:16px">Name</label>
												<input type="text" class="form-control" id="name" name="name" required="true" >
										</div>

										<div class="form-group valid-form col-md-6">
											<label for="field-0-3" style="color:black; font-size:16px">Gender</label>
											<select  class="form-control" id="gender" name="gender" required="true" >
												<option value=""></option>
												<option value="M">Male</option>
												<option value="F">Female</option>
											</select>
										</div>


										<div class="form-group valid-form col-md-6">
											<label for="field-0-4" style="color:black; font-size:16px">Telephone</label>
												<input type="text" size="2" class="form-control" id="telephone" name="telephone" maxlength="11" required="true" >
										</div>
										<div class="form-group valid-form">
											<label for="field-0-5" style="color:black; font-size:16px">Organization</label>
												<input type="text" class="form-control"  id="organization" placeholder="" name="organization" required="true" maxlength="50">
										</div>

										<div class="form-group valid-form">
											<label for="field-0-5" style="color:black; font-size:16px">Address</label>
												<input type="text" class="form-control"  id="address" placeholder="" name="address" required="true" maxlength="50">
										</div>

										<label for="field-0-6"  style="color:black; font-size:16px">Region</label>
										<div class="form-group valid-form">
											<select class="form-control" id="region" name="region" required="true" >
												<option value=""></option>
												<option value="NCR">National Capital Region(NCR)</option>
												<option value="I">REGION I</option>
										        <option value="II">REGION 2 (Cagayan Valley)</option>
										        <option value="III">REGION III (Central Luzon)</option>
										        <option value="IV-A">REGION IV-A (CALABARZON)</option>
										        <option value="IV-B">REGION IV-B(MIMAROPA)</option>
										        <option value="V">REGION V(Bicol Region)</option>
										        <option value="VI">REGION VI (Western Visayas)</option>
										        <option value="VII">REGION VII (Central Visayas)</option>
										        <option value="VIII">REGION VIII (Eastern Visayas)</option>
										        <option value="IX">REGION IX (Zamboanga Peninsula)</option>
										        <option value="X">REGION X (Northern Mindanao)</option>
										        <option value="XI">REGION XI (Davao Region)</option>
										        <option value="XII">REGION XII (Soccsksargen)</option>
										        <option value="XIII">REGION XIII (CARAGA)</option>
										        <option value="XIV">REGION 14 Cordillera Administrative Region (CAR)</option>
										        <option value="XV">REGION XV - Autonomous Region in Muslim Mindanao (ARMM)</option>
										        <option value="XVIII">Region XVIII - NIR - Negros Island Region</option>
											</select>
										</div>

									<hr>

								</div>
							</div>
						</div>

						<div class="w3agile-validation col-md-8">
							<div class="panel panel-widget agile-validation">
								<div class="my-div">

										<div class="input-info">
											<h3>Orders</h3>
										</div>
										<hr>
										<div class="input-info">
											<h4>Fishes</h4>
										</div>
										<div class="fishes" id="fishes">
											<div class="form-group">
												<input type="hidden" name="counter" id="counter" class="form-control" value="1">
											</div>
											<div class="fish" id="0" style="border:1px solid black; padding: 25px;">
												<div class="row">

													<div class="col-xs-12 col-md-3">
														<label for="field-1"  style="color:black; font-size:16px">Fish</label>
														<div class="form-group">
															<select name="fish"  class="form-control" required="true" >
																<option value=""></option>
																{% for fish in fishes %}
																<option value="{{fish}}">{{ fish }}</option>
																{% endfor %}
															</select>
														</div>
													</div>
													<div class="col-xs-12 col-md-3">
														<label for="field-3" style="color:black; font-size:16px">Quantity</label>
														<div class="form-group">
															<input type="text" name="quantity" required="true" filter="greater_than:0" class="form-control" data-required="Given value must be positive">
														</div>
													</div>
													<div class="col-xs-12  col-md-3">
														<label for="field-2" style="color:black; font-size:16px">Amount</label>
														<div class="form-group">
															<input type="text" name="amount" required="true" filter="greater_than:0" class="form-control" data-required="Given value must be positive">
														</div>
													</div>
													<div class="col-xs-12 col-md-3">
														<label for="field-4" style="color:black; font-size:16px">Free</label>
														<div class="form-group">
															<input type="number" name="free" class="form-control">
														</div>
													</div>
													<div class="form-group col-md-12">
														<div class="col-xs-12  col-md-6">
															<label style="color:black; font-size:16px" >Nature</label>
																<textarea type="text" name="nature"  maxlength="20" class="form-control"></textarea>
														</div>
														<div class="col-xs-12  col-md-6">
															<br>
															<ul class="bt-list">
																<button type="button" class="btn btn-lg btn-primary btn-block number" style="background-color:#ff3333" value="0"> cancel </button>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>

										<div>
											<ul class="bt-list">
												<li><a href="#" class="hvr-icon-float-away col-24" id="add">Add Fish</a></li>

											</ul>
										</div>
										<hr>
										<label >Date Acquired</label>
										<div class="form-group">
											<input type="text" name="date_acquired"  class="form-control"  >
										</div>

										<div class="form-group" >
											<label >Remarks (optional)</label>
											<textarea stype="number" name="remarks" maxlength="75" class="form-control" ></textarea>
										</div>

										<hr>

										<p>
											<input type="submit" name="sub-1" value="Submit" class="btn btn-primary">
											<input type="reset" name="res-1" id="res-1" value="Reset" class="btn btn-danger">
											<input type="button" name="but-1" value="Button 1" class="btn btn-default">
										</p>

								</div>
							</div>
						</div>

						</form>
					</div>
				</div>
				<!-- //validation -->
			</div>
		</div>
	<script src="{% static 'js/bootstrap.js' %}"></script>

	<script>
	$("[name='date_acquired']").datepicker().datepicker("setDate", new Date());
	</script>
	<script type="text/javascript" src="{% static 'js/valida.2.1.6.min.js' %}"></script>
	<!-- input-forms -->
		<script type="text/javascript" >

			$(document).ready(function() {

				// show Valida's version.
				$('#version').valida( 'version' );

				// Exemple 1
				$('.valida').valida();

				// Exemple 2
				/*
				$('.valida').valida({

					// basic settings
					validate: 'novalidate',
					autocomplete: 'off',
					tag: 'p',

					// default messages
					messages: {
						submit: 'Wait ...',
						required: 'Este campo é obrigatório',
						invalid: 'Field with invalid data',
						textarea_help: 'Digitados <span class="at-counter">{0}</span> de {1}'
					},

					// filters & callbacks
					use_filter: true,

					// a callback function that will be called right before valida runs.
					// it must return a boolan value (true for good results and false for errors)
					before_validate: null,

					// a callback function that will be called right after valida runs.
					// it must return a boolan value (true for good results and false for errors)
					after_validate: null

				});
				*/

        // setup the partial validation
				$('#partial-1').on('click', function( ev ) {
					ev.preventDefault();
					$('#res-1').click(); // clear form error msgs
					$('form').valida('partial', '#field-1'); // validate only field-1
					$('form').valida('partial', '#field-1-3'); // validate only field-1-3
				});

			});

		</script>
		<!-- //input-forms -->
		<!--validator js-->
		<script src="{% static 'js/validator.min.js' %}"></script>
		<!--//validator js-->
<script src="{% static 'js/proton.js' %}"></script>

<script type="text/javascript" >
$( "#add" ).click(function() {
	$('form').valida()
	var count = parseInt($("#counter").val());
	count += 1;

	var clone = $( ".fish" ).clone().first();
	clone.find( "input[name=quantity]" ).val("")
	clone.find( "input[name=quantity]" ).attr('class', 'form-control');
	clone.find( "select[name=fish]" ).attr('name', 'fish' + count);
	clone.find( "input[name=amount]" ).attr('name', 'amount' + count);
	clone.find( "input[name=quantity]" ).attr('name', 'quantity' + count);
	clone.find( "input[name=free]" ).attr('name', 'free' + count);
	clone.find( "input[name=nature]" ).attr('name', 'nature' + count);
	clone.find( ".number" ).val(count);
	clone.attr('id', count)
	clone.appendTo( "#fishes" );
	$("#counter").val(count)
	$('.help-block').remove();

	$('#version').valida( 'version' );

	// Exemple 1
	$('.valida').valida();
	$('#partial-1').on('click', function( ev ) {
		ev.preventDefault();
		$('#res-1').click(); // clear form error msgs
		$('form').valida('partial', '#field-1'); // validate only field-1
		$('form').valida('partial', '#field-1-3'); // validate only field-1-3
	});
	});
	jQuery.fn.fadeOutAndRemove = function(speed){
    $(this).fadeOut(speed,function(){
        $(this).remove();
    })
	}



	$(document).ready(function() {

		// show Valida's version.


	});

$('#fishes').on('click', '.number', function() {
	remove_id = $(this).val();
	if (remove_id !=0){
	$('div[id='+remove_id+"]").fadeOutAndRemove('slow');
	}
});

$('#existing').on('input',function(e){
	len = $('#existing').val();

	if(len.length!=0){

		$('#name').attr('disabled', 'disabled');
		$('#gender').attr('disabled', 'disabled');
		$('#telephone').attr('disabled', 'disabled');
		$('#address').attr('disabled', 'disabled');
		$('#region').attr('disabled', 'disabled');
		$('#organization').attr('disabled', 'disabled');
		$('#name').removeAttr('required',);
		$('#gender').removeAttr('required',);
		$('#telephone').removeAttr('required',);
		$('#address').removeAttr('required',);
		$('#region').removeAttr('required',);
		$('#organization').removeAttr('required',);

		$('.new').hide();;

	}
	else{
		$('#name').removeAttr("disabled");
		$('#gender').removeAttr("disabled");
		$('#telephone').removeAttr("disabled");
		$('#address').removeAttr("disabled");
		$('#region').removeAttr("disabled");
		$('#organization').removeAttr("disabled");

		$('#name').attr('required', 'true');
		$('#gender').attr('required', 'true');
		$('#telephone').attr('required', 'true');
		$('#address').attr('required', 'true');
		$('#region').attr('required', 'true');
		$('#organization').attr('required', 'true');
		if(len.length==0){
		$('.new').toggle();
	}
	}

});
</script>
<script>
function myFunction() {
    // Declare variables
    var input, filter, ul, li, a, i;
    input = document.getElementById('existing');
    filter = input.value.toUpperCase();
    ul = document.getElementById("myUL");
    li = ul.getElementsByTagName('li');

    // Loop through all list items, and hide those who don't match the search query
		if (filter.length >1){
	    for (i = 0; i < li.length; i++) {
	        a = li[i].getElementsByTagName("a")[0];
	        if (a.innerHTML.toUpperCase().indexOf(filter) > -1) {
	            li[i].style.display = "";
	        } else {
	            li[i].style.display = "none";
	        }
	    }
		}
		else{
			for (i = 0; i < li.length; i++) {
				 a = li[i].getElementsByTagName("a")[0];
						 li[i].style.display = "none";
		 }
		}
}
$('.customer').click(function() {
	value = $(this).text();
	$('#existing').val(value);
	input = document.getElementById('existing');
	filter = input.value.toUpperCase();
	ul = document.getElementById("myUL");
	li = ul.getElementsByTagName('li');
	for (i = 0; i < li.length; i++) {
		 a = li[i].getElementsByTagName("a")[0];
				 li[i].style.display = "none";
 		 }
});


</script>

{% endblock content%}
